<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="icon" type="image/jpeg" href="/favicon.png">
    <title>Checkout | Facility.IA</title>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        const token = localStorage.getItem('token');
        if (!token) window.location.href = 'login.html';
    </script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style-master.css">
</head>
<body style="display:flex; align-items:center; justify-content:center; height:100vh; overflow:hidden;">

    <div id="particles-js" style="position:fixed; top:0; left:0; width:100%; height:100%; z-index:-1;"></div>

    <div style="
        background: rgba(22, 27, 34, 0.95); 
        backdrop-filter: blur(20px);
        border: 1px solid rgba(0, 255, 136, 0.3);
        padding: 40px; 
        border-radius: 24px; 
        width: 90%; 
        max-width: 450px; 
        text-align: center;
        box-shadow: 0 0 50px rgba(0, 255, 136, 0.15);
        animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    ">
        <div style="
            width: 80px; height: 80px; margin: 0 auto 25px auto;
            background: rgba(0, 255, 136, 0.1); border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            color: var(--primary); font-size: 2rem;
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.2);
        ">
            <i class="fas fa-lock"></i>
        </div>

        <h2 style="margin: 0 0 10px 0; color: white;">Finalizar Pagamento</h2>
        <p style="color: #aaa; margin-bottom: 30px; line-height: 1.5;">
            Você será redirecionado para nosso ambiente seguro de pagamentos para concluir sua assinatura <strong style="color: white;" id="planName">Plus</strong>.
        </p>

        <button onclick="irParaPagamento()" id="btnPay" class="cta-button-primary" style="width: 100%; padding: 15px; font-size: 1rem;">
            <i class="fas fa-external-link-alt" style="margin-right: 10px;"></i>
            Ir para Pagamento Seguro
        </button>

        <button onclick="history.back()" style="
            background: transparent; border: none; color: #666; 
            margin-top: 20px; cursor: pointer; font-size: 0.9rem;
            text-decoration: underline;
        ">Cancelar e Voltar</button>
    </div>

    <script src="config.js"></script>
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const params = new URLSearchParams(window.location.search);
            const plan = params.get('plan') || 'Plus';
            document.getElementById('planName').innerText = plan;

            if(typeof particlesJS !== 'undefined') {
                particlesJS("particles-js", {
                    "particles": { "number": { "value": 15 }, "color": { "value": "#00ff88" }, "opacity": { "value": 0.1 }, "size": { "value": 2 }, "move": { "enable": true, "speed": 0.5 } }
                });
            }
        });

        function irParaPagamento() {
            const btn = document.getElementById('btnPay');
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Redirecionando...';
            btn.disabled = true;
            btn.style.opacity = 0.7;

            // Simulação de redirecionamento para Gateway Externo (Stripe/Hotmart/etc)
            setTimeout(() => {
                alert("Aqui você seria enviado para a URL de pagamento.");
                // Em produção: window.location.href = "https://pagamento.seuapp.com...";
                
                // Demo: Simula sucesso e volta
                window.location.href = 'dashboard.html';
            }, 1500);
        }
    </script>
</body>
</html>